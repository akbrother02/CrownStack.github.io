<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="VikwqTxe7ybu1qSM7LFgIQpvHLN0_j-iVzaLqF88vEw" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Matt Swanson - How to make writing tests less painful</title>
  <meta name="author" content="Matt Swanson" />
  <meta name="description" content="writing on software, book writeups and projects by a software engineer from Indianapolis" />
  
  <link rel="canonical" href="http://mdswanson.com/blog/2013/08/03/how-to-make-testing-less-painful.html" />

  <link href="//fonts.googleapis.com/css?family=Nunito:400,700,300|Varela+Round" rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="/static/favicon.png">
  <link rel="alternate" type="application/rss+xml" title="Matt Swanson's Blog" href="http://localhost:4000/atom.xml" />

  
    <link rel="stylesheet" href="/css/site.css">
  
</head>
<body>
  <section>
    <header class="navigation">
  <a href="/" class="logo" title="ÄLG, a solitary moose.">
    <img src="/static/moose.png" alt="Moose">
  </a>
  <nav>
    <ul>
      <li><a href="/">writing</a></li>
      <li><a href="/archive">archive</a></li>
      <li><a href="/about">about</a></li>
      <li class="no-bullet"><a href="/atom.xml">rss</a></li>
    </ul>
  </nav>
</header>

<article>
  <h1 class="title">
    How to make writing tests less painful
  </h1>

  
  <p class="subtitle">
    
      <span>
        
          Series:
          
            
              <a href="/#practices">practices</a>
            
          
        
      </span>

      <span class="date">
        August 03, 2013
      </span>
    
  </p>

  <div id="post"><p>I’ve been hacking on a few new projects recently, both at work and on my own 
time.</p>

<p>But I’ve been kind of sloppy with testing.</p>

<p>The biggest hurdle I am running into is pain. Slow tests are painful. Doing a
bunch of manual setup to test something is painful. Gluing together 13 different
gems to get things how I like them is painful. Mustering the initiative to write
the first test is painful.</p>

<p>Turning a test suite from a hostile environment into a cozy place that makes you
feel all warm inside takes a lot of upfront effort. Sometimes I don’t think about
the benefits of investing time at the start of a project to up my motivation to
write good tests later on.</p>

<p>There are a few concrete things that encourage me to keep up a well-groomed 
test suite. I’ve found that I am very likely to break good testing habits on 
projects that are missing the following:</p>

<ul>
  <li>
    <p><strong>Single command to run all tests</strong> I recently spent a few weeks on a legacy
project and I was happy to see a full test suite. I was not so happy to learn that
you couldn’t run the full suite at once. It wasn’t that the project was just 
missing a script to run all the tests, but that you would hit a cryptic <code class="highlighter-rouge">JRuby</code>
out-of-memory error if you ran them all at once. I can not imagine wanting to
pay the upkeep for that test suite — I had to run the tests in 5-10 test
“chunks” to see if anything was broken. Yuck.</p>
  </li>
  <li>
    <p><strong>Seeds have been planted</strong> I feel guilty slacking off on tests if I arrive
on a project that has decent tests already. Even if that person is just a past
version of me! Harness your initial momentum to do the grunt work and set 
yourself up for future success and good habits later. Pretend someone you really
admire has left the project in your care and trusted you to keep the quality
consistent.</p>
  </li>
  <li>
    <p><strong>Factories</strong> I have a love/hate relationship with <code class="highlighter-rouge">FactoryGirl</code> and the 
factory pattern in general. I love when I can replace 50 lines of setup code with
<code class="highlighter-rouge">Factory.create :project_with_contributions</code> in a test; it is super expressive 
and lets me focus on the important behavior I am trying to explore. But I hate,
hate, hate setting up factories. It is some of the most boring stuff I can think
of.</p>
  </li>
</ul>

<p>Most of this stuff is not fun. I don’t know many people that like doing the
grunt work that turns a test suite into a well-oiled machine. But if you can deal
with the pain early, you will be thankful (and more likely to still be writing
good tests) a month or two down the line.</p>

<p>Most projects are marathons, not sprints. Unless you are doing scrum.</p>
</div>      

  
    <hr class="fin"/>
  
</article>


  <footer>
  <div id="bio">
    <div id="bio-image">
      <img src="/static/mugshot.jpg" alt="Matt Swanson">
    </div>
    
    <div id="bio-text">
      <p>Hi. I'm <b>Matt Swanson</b>.</p>
      <p>I do things and sometimes write about it here. I'm a Software Engineer from Indiana and I ship code at <a href="http://www.sep.com/">SEP</a>.</p>
      
      <div id="bio-social">
        <strike>Stalk</strike> Follow me:
<div id="social-links">
  <a title="swanson on Github" href="http://github.com/swanson/"><i class="fa fa-github-square"></i></a>
  <a title="swanson on Hacker News" href="http://news.ycombinator.com/user?id=swanson"><i class="fa fa-hacker-news"></i></a>
  <a title="_swanson on Twitter" href="http://twitter.com/_swanson"><i class="fa fa-twitter-square"></i></a>
  <a title="RSS feed" id="rss" href="/atom.xml"><i class="fa fa-rss-square"></i></a>
</div>
      </div>
    </div>
  </div>

  
  <aside>
    <h3>Further reading</h3>
    <ul class="posts">
      
        
        
          
            <li><a href="/blog/2016/04/22/compounding-technical-debt.html">Compounding technical debt</a></li>
          
        
          
            <li><a href="/blog/2016/01/25/sell-or-kill.html">Internal tools should be sold or killed</a></li>
          
        
          
            <li><a href="/blog/2015/10/26/code-neutral.html">Code Neutral</a></li>
          
        
      
    </ul>
  </aside>
  
</footer>

<div id="fine-print">
  <p>
    built with <a href="#">&hearts;</a>, <a href="http://jekyllrb.com/">Jekyll</a>, and <a href="https://github.com/swanson/swanson.github.com">GitHub Pages</a> &mdash; read the <a href="/legal">fine print</a>
  </p>
</div>

  </section>

  
</body>
</html>
