<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="VikwqTxe7ybu1qSM7LFgIQpvHLN0_j-iVzaLqF88vEw" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Matt Swanson - Responsive Layouts in Android without Copy/Paste</title>
  <meta name="author" content="Matt Swanson" />
  <meta name="description" content="writing on software, book writeups and projects by a software engineer from Indianapolis" />
  
  <link rel="canonical" href="http://mdswanson.com/blog/2013/12/11/responsive-layouts-in-android.html" />

  <link href="//fonts.googleapis.com/css?family=Nunito:400,700,300|Varela+Round" rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="/static/favicon.png">
  <link rel="alternate" type="application/rss+xml" title="Matt Swanson's Blog" href="http://localhost:4000/atom.xml" />

  
    <link rel="stylesheet" href="/css/site.css">
  
</head>
<body>
  <section>
    <header class="navigation">
  <a href="/" class="logo" title="ÄLG, a solitary moose.">
    <img src="/static/moose.png" alt="Moose">
  </a>
  <nav>
    <ul>
      <li><a href="/">writing</a></li>
      <li><a href="/archive">archive</a></li>
      <li><a href="/about">about</a></li>
      <li class="no-bullet"><a href="/atom.xml">rss</a></li>
    </ul>
  </nav>
</header>

<article>
  <h1 class="title">
    Responsive Layouts in Android without Copy/Paste
  </h1>

  
  <p class="subtitle">
    
      <span>
        
          Series:
          
            
              <a href="/#android">android</a>
            
          
        
      </span>

      <span class="date">
        December 11, 2013
      </span>
    
  </p>

  <div id="post"><p>I’m working on an Android app that targets both phones and tablets so I’ve been
digging into how to build layouts that work across all device sizes.</p>

<p>I have some experience with responsive design on the web — things like
fluid grids, media queries, etc — so I wanted to try to leverage those
same approaches for Android.</p>

<p>My biggest goal was to create a layout that can scale up without having
completely separate layouts for each screen size. Android uses 
<a href="http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts">configuration qualifiers</a> to load up the right resources based on your screen
size or orientation (portrait or landscape).</p>

<p>Instead of tweaking individual layouts per device, I’ve found that it is much
easier to just overload a <code class="highlighter-rouge">styles.xml</code> file for changes between sizes.</p>

<p>If you think of it like CSS, you will have your base styles in the
<code class="highlighter-rouge">values/styles.xml</code> file and then define media query-like customizations in
<code class="highlighter-rouge">values-sw600dp/styles.xml</code> (7” tablets), <code class="highlighter-rouge">values-sw600dp-land/styles.xml</code> 
(7” tablets in landscape), <code class="highlighter-rouge">values-sw720dp/styles.xml</code> (10” tablets), etc.</p>

<p>In a typical CSS responsive grid system you might have a <code class="highlighter-rouge">.container</code> class
that is 960px wide (with auto-margins) on desktop screens. On a phone, you would
make the <code class="highlighter-rouge">.container</code> have 100% width (with no margins).</p>

<p>We can take the same approach using Android styles. First, setup a base style.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>res/values/styles.xml
<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"Container"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:layout_margin"</span><span class="nt">&gt;</span>0dp<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:padding"</span><span class="nt">&gt;</span>16dp<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:layout_width"</span><span class="nt">&gt;</span>match_parent<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:layout_height"</span><span class="nt">&gt;</span>match_parent<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:orientation"</span><span class="nt">&gt;</span>vertical<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:background"</span><span class="nt">&gt;</span>@drawable/container_background<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre>
</div>

<p>For tablets in portrait orientation, we add a bit more padding since the 
screen is larger.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>res/values-sw600dp/styles.xml
<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"Container"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:layout_margin"</span><span class="nt">&gt;</span>0dp<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:padding"</span><span class="nt">&gt;</span>32dp<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:layout_width"</span><span class="nt">&gt;</span>match_parent<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:layout_height"</span><span class="nt">&gt;</span>match_parent<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:orientation"</span><span class="nt">&gt;</span>vertical<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:background"</span><span class="nt">&gt;</span>@drawable/container_background<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre>
</div>

<p>The big change is on tablets in landscape orientation. We add layout margins
so that the content doesn’t stretch the full width of the screen. We can add
a different background drawable to the parent view (like a <a href="http://mdswanson.com/blog/2012/01/30/repeating-background-textures-in-android.html">subtle pattern</a>)
to fill the whitespace.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>res/values-sw600dp-land/styles.xml
<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"Container"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:layout_marginRight"</span><span class="nt">&gt;</span>130dp<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:layout_marginLeft"</span><span class="nt">&gt;</span>130dp<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:padding"</span><span class="nt">&gt;</span>32dp<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:layout_width"</span><span class="nt">&gt;</span>match_parent<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:layout_height"</span><span class="nt">&gt;</span>match_parent<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:orientation"</span><span class="nt">&gt;</span>vertical<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:background"</span><span class="nt">&gt;</span>@drawable/container_background<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre>
</div>

<p>Then on our various application screens, we use our style like so:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;LinearLayout</span> <span class="na">style=</span><span class="s">"@style/Container"</span><span class="nt">&gt;</span>
  ... buttons, edit texts, text views, etc ...
<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre>
</div>

<p>A single application layout for all screens that scales up (and down)
gracefully.</p>

<h3 id="4-phone">4” Phone</h3>
<p><img src="http://localhost:4000/static/responsive_android_phone.JPG" alt="Responsive Layout on Phone" /></p>

<h3 id="7-tablet">7” Tablet</h3>
<p><img src="http://localhost:4000/static/responsive_android_tablet.JPG" alt="Responsive Layout on Tablet" /></p>

<h3 id="7-tablet-landscape">7” Tablet (Landscape)</h3>
<p><img src="http://localhost:4000/static/responsive_android_tablet_landscape.JPG" alt="Responsive Layout on Landscape Tablet" /></p>

<hr />

<p>Another handy feature of some CSS frameworks (like Bootstrap) are the helper
classes like <code class="highlighter-rouge">.visible-phone</code>, <code class="highlighter-rouge">.hidden-phone</code>, <code class="highlighter-rouge">.visible-tablet</code>, etc. We
can do the same with Android.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="c">&lt;!-- Device Visibility --&gt;</span>
<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"PhoneOnly"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:visibility"</span><span class="nt">&gt;</span>gone<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"TabletOnly"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:visibility"</span><span class="nt">&gt;</span>visible<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"TabletPortraitOnly"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:visibility"</span><span class="nt">&gt;</span>gone<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">"TabletLandscapeOnly"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">"android:visibility"</span><span class="nt">&gt;</span>visible<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre>
</div>

<p>Drop these styles in each of your configuration folders and toggle the
visibilities on and off as appropriate.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;LinearLayout</span> <span class="na">android:id=</span><span class="s">"@+id/column_one"</span><span class="nt">&gt;</span>
  ... some content ...
<span class="nt">&lt;/LinearLayout&gt;</span>

<span class="nt">&lt;LinearLayout</span> <span class="na">android:id=</span><span class="s">"@+id/column_two"</span>
  <span class="na">style=</span><span class="s">"@style/TabletLandscapeOnly"</span><span class="nt">&gt;</span>
  ... some extra content since we have space ...
<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre>
</div>

<p>For a tablet in landscape, the style will cause the second column to be shown.
For all other devices, the second column will be hidden.</p>

<hr />

<p>With just a few lines of XML, we have a mini-framework setup that can be used
throughout our app. You can extend this technique to implement other common 
“classes” (think master-detail or cards) as needed.</p>

<p>Unfortunately, it is <a href="http://stackoverflow.com/questions/1995004/packaging-android-resource-files-within-a-distributable-jar-file">tricky</a> to distribute a JAR that contains Android resources
(outside of Gradle) so there hasn’t been much progress made in creating the
Bootstrap-equivalent for Android (don’t be confused by either of <a href="http://www.androidbootstrap.com/">these</a> 
<a href="https://github.com/Bearded-Hen/Android-Bootstrap">projects</a>,
they don’t do what you might expect). Hopefully, Android’s move to Gradle will
make a reusable layout framework more feasible.</p>

</div>      

  
    <hr class="fin"/>
  
</article>


  <footer>
  <div id="bio">
    <div id="bio-image">
      <img src="/static/mugshot.jpg" alt="Matt Swanson">
    </div>
    
    <div id="bio-text">
      <p>Hi. I'm <b>Matt Swanson</b>.</p>
      <p>I do things and sometimes write about it here. I'm a Software Engineer from Indiana and I ship code at <a href="http://www.sep.com/">SEP</a>.</p>
      
      <div id="bio-social">
        <strike>Stalk</strike> Follow me:
<div id="social-links">
  <a title="swanson on Github" href="http://github.com/swanson/"><i class="fa fa-github-square"></i></a>
  <a title="swanson on Hacker News" href="http://news.ycombinator.com/user?id=swanson"><i class="fa fa-hacker-news"></i></a>
  <a title="_swanson on Twitter" href="http://twitter.com/_swanson"><i class="fa fa-twitter-square"></i></a>
  <a title="RSS feed" id="rss" href="/atom.xml"><i class="fa fa-rss-square"></i></a>
</div>
      </div>
    </div>
  </div>

  
  <aside>
    <h3>Further reading</h3>
    <ul class="posts">
      
        
        
          
            <li><a href="/blog/2014/06/02/android-form-models.html">Extracting Form Models in Android</a></li>
          
        
          
            <li><a href="/blog/2014/04/07/durable-android-rest-clients.html">Durable Android REST Clients</a></li>
          
        
          
            <li><a href="/blog/2014/02/24/integration-testing-rest-apis-for-android.html">Integration Testing against REST APIs in Android</a></li>
          
        
      
    </ul>
  </aside>
  
</footer>

<div id="fine-print">
  <p>
    built with <a href="#">&hearts;</a>, <a href="http://jekyllrb.com/">Jekyll</a>, and <a href="https://github.com/swanson/swanson.github.com">GitHub Pages</a> &mdash; read the <a href="/legal">fine print</a>
  </p>
</div>

  </section>

  
</body>
</html>
