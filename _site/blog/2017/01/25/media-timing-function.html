<p>No one can deny the importance of animation in iOS. The way they enhance the UI/UX experience is unparalleled in handheld devices. If you are an iOS developer, i am pretty sure you must have used animations at least once which also makes me assume that you are familiar with <code class="highlighter-rouge">CAMediaTimingFunction</code>.</p>

<p><code class="highlighter-rouge">CAMediaTimingFunction</code> gives a real world feel to your animations. For example in real life if you throw a ball it bounces, loses its speed and comes to rest after deceleration. All of this can be explained with laws of physics and can be mimicked in animations with easing functions.</p>

<p>Lets examine the <code class="highlighter-rouge">CAMediaTimingFunction</code> and try to create some custom easing functions.</p>

<p><code class="highlighter-rouge">CAMediaTimingFunction</code> can be created using initializers
<code class="highlighter-rouge">- init(name: String)</code> and <code class="highlighter-rouge">- init(controlPoints: Float, Float, Float, Float)</code>.</p>

<p>The interesting one is <code class="highlighter-rouge">init(controlPoints: Float, Float, Float, Float)</code> which takes four float parameters. The fact is <code class="highlighter-rouge">CAMediaTimingFunction</code> is created using <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve">cubic–bezier curve</a> which is quite commonly used in digital drawing tools. It needs four Points to draw a curve. How the actual drawing takes place is not in the scope of this article, also there are plenty of tutorials and videos available to explain this.</p>

<p>Now among these 4 points one is starting point, one is end point and rest two are called control points which are responsible for the curvature of curve. In case of <code class="highlighter-rouge">CAMediaTimingFunction</code> start Point and end points are fixed i.e [(0,0), (1, 1)]. Now we need two control points to draw an easing function, which is exactly what <code class="highlighter-rouge">- init(controlPoints: Float, Float, Float, Float)</code> asking you to provide. So if we create <code class="highlighter-rouge">CAMediaTimingFunction</code> with <code class="highlighter-rouge">CAMediaTimingFunction(controlPoints: x1, y1, x2, y2)</code> we have required four points to create the cubic–bezier curve, which are [(0, 0), (x1, y1), (x2, y2), (1, 1)].</p>

<p>It is no surprise that default timing functions <code class="highlighter-rouge">kCAMediaTimingFunctionLinear</code>, <code class="highlighter-rouge">kCAMediaTimingFunctionEaseIn</code>, <code class="highlighter-rouge">kCAMediaTimingFunctionEaseOut</code>, <code class="highlighter-rouge">kCAMediaTimingFunctionEaseInEaseOut</code>,
<code class="highlighter-rouge">kCAMediaTimingFunctionDefault</code> are also created using these four points.</p>

<p>Lets try to find out what these control points are.</p>

<h2 id="control-points-of-default-easing-functions">Control points of default easing functions.</h2>

<p>Run following code in playground</p>

<noscript><pre>400: Invalid request
</pre></noscript>
<script src="https://gist.github.com/829dfdb8ab804196520081806f7dac50.js"> </script>

<p>This code just gets the start/end points and control points and prints them in console. You will see following log printed in playground.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>linear
(0.00, 0.00)
(0.00, 0.00)
(1.00, 1.00)
(1.00, 1.00)

easeIn
(0.00, 0.00)
(0.42, 0.00)
(1.00, 1.00)
(1.00, 1.00)

easeOut
(0.00, 0.00)
(0.00, 0.00)
(0.58, 1.00)
(1.00, 1.00)

easeInEaseOut
(0.00, 0.00)
(0.42, 0.00)
(0.58, 1.00)
(1.00, 1.00)

default
(0.00, 0.00)
(0.25, 0.10)
(0.25, 1.00)
(1.00, 1.00)
</code></pre>
</div>

<p>Please notice that start point and end point are same for every function while control points define the behavior of the function.</p>

<h2 id="plotting-the-curve">Plotting the curve.</h2>

<p>Lets try to plot all these function to examine how they look like.</p>

<noscript><pre>400: Invalid request
</pre></noscript>
<script src="https://gist.github.com/c4c32498d215e407770be8ed7151550a.js"> </script>

<p>The above code snippet creates a class <code class="highlighter-rouge">EasingFunctionGraph</code> which plots the function curve given the control points.</p>

<p>Please notice that in <code class="highlighter-rouge">let firstLine = EasingFunctionGraph(x1: 0.25, y1: 0.1, x2: 0.25, y2: 1.0)</code> we have passed the control points for <code class="highlighter-rouge">kCAMediaTimingFunctionDefault</code> which we got above. You will see following curve plotted in playground live view.</p>

<p><img src="/static/default-plot.png" alt="Drawing" style="width: 200px;" /></p>

<p>Lets try <code class="highlighter-rouge">easeInEaseOut</code> curve with <code class="highlighter-rouge">let firstLine = EasingFunctionGraph(x1: 0.42, y1: 0.0, x2: 0.58, y2: 1.0)</code>. You will see following curve plotted in playground live view.</p>

<p><img src="/static/ease-in-ease-out.png" alt="Drawing" style="width: 200px;" /></p>

<p>This is fun. Now we can try custom values for control points and see how this curve behaves.</p>

<p>Actually we can create a lot of custom curves like this</p>

<p><img src="/static/all-curves.png" alt="Drawing" style="width: 600px;" /></p>

<p>There is a good cheat sheet available <a href="http://easings.net/">here</a>.</p>

<p>Lets create an extension using above cheat sheet</p>

<noscript><pre>400: Invalid request
</pre></noscript>
<script src="https://gist.github.com/f91dfc1360a9c3a755d74f91c03fd30c.js"> </script>

<p>Although we can not create damping or oscillation curve with these but these additional curves are also awesome.</p>

<p>Happy Coding.</p>
