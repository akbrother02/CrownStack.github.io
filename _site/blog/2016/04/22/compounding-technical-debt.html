<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="google-site-verification" content="VikwqTxe7ybu1qSM7LFgIQpvHLN0_j-iVzaLqF88vEw" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Matt Swanson - Compounding technical debt</title>
  <meta name="author" content="Matt Swanson" />
  <meta name="description" content="writing on software, book writeups and projects by a software engineer from Indianapolis" />
  
  <link rel="canonical" href="http://mdswanson.com/blog/2016/04/22/compounding-technical-debt.html" />

  <link href="//fonts.googleapis.com/css?family=Nunito:400,700,300|Varela+Round" rel="stylesheet" type="text/css">

  <link rel="shortcut icon" href="/static/favicon.png">
  <link rel="alternate" type="application/rss+xml" title="Matt Swanson's Blog" href="http://localhost:4000/atom.xml" />

  
    <link rel="stylesheet" href="/css/site.css">
  
</head>
<body>
  <section>
    <header class="navigation">
  <a href="/" class="logo" title="ÄLG, a solitary moose.">
    <img src="/static/moose.png" alt="Moose">
  </a>
  <nav>
    <ul>
      <li><a href="/">writing</a></li>
      <li><a href="/archive">archive</a></li>
      <li><a href="/about">about</a></li>
      <li class="no-bullet"><a href="/atom.xml">rss</a></li>
    </ul>
  </nav>
</header>

<article>
  <h1 class="title">
    Compounding technical debt
  </h1>

  
  <p class="subtitle">
    
      <span>
        
          Series:
          
            
              <a href="/#product_dev">product dev</a>,
            
          
            
              <a href="/#practices">practices</a>
            
          
        
      </span>

      <span class="date">
        April 22, 2016
      </span>
    
  </p>

  <div id="post"><p>I like the concept of technical debt; not the watered down version that people use when the code base is in a messy state, but the idea that we are making considered decisions that benefit the short-term, at the risk of long-term consequences.</p>

<p>Today, the long-term consequences surfaced. The following is a play-by-play of a day in my life coming back to a project that has started to ‘default’ on its debt:</p>

<p>I’ve fixed a small bug and I wanted to deploy it to production.</p>

<ul>
  <li>Push to Heroku</li>
</ul>

<p>The Heroku instance is still running the cedar-10 stack – an outdated version of the platform that was deprecated in 2014. At the time, apps could still run on the platform for another year without issue so upgrading was deferred. Now cedar-10 has reached end-of-life and new pushes cannot be deployed.</p>

<ul>
  <li>Upgrade stack, try to deploy</li>
</ul>

<p>Upgrading to cedar-14 was not an issue, but as part of the upgrade, the version of <code class="highlighter-rouge">bundler</code> was changed and the Gemfile we try to push is being flagged as “corrupted”. Yikes. The most reliable solution seems to be to rebuild the bundle.</p>

<ul>
  <li>Update bundler and rebuild</li>
</ul>

<p>The Gemfile was using the “tilde arrow” semantic version specifier (sidenote: I probably should have changed this in hindsight) so we got slightly different versions of gems.</p>

<p>Turns out there is an issue with two of the gems – both legacy versions – that requires me to wade through 2-3 year old GitHub issues and StackOverflow posts. Eventually, that gets sorted out.</p>

<ul>
  <li>Gems sorted out, try to deploy again</li>
</ul>

<p>Deploy goes through, but there are scary warnings about using EOL Ruby version. I’ve been using a newer version in development, so I try to upgrade to something that is supported and receiving security patches.</p>

<ul>
  <li>Upgrade ruby version on staging</li>
</ul>

<p>Everything explodes. An hour later, the issue is tracked down to a gem that tracks application errors. Yes, a library for tracking errors caused errors to happen. Bumping the version makes everything happy again.</p>

<ul>
  <li>Deploy new ruby version to production</li>
</ul>

<p>No more fires for today.</p>

<hr />

<p>My path was not optimal and some of the work probably should have been tackled independently. But this example illustrates how technical debt can compound over time. One small decision (defer upgrading the Heroku stack) saw the ‘interest’ grow and grow over time as it was neglected. As a result, to deploy a one-line bug fix required a day of high-pressure infrastructure changes and debugging.</p>

<p>I’ve still not paid down all the debt, but I tackled a big enough chunk to let me address the immediate need. The difficult part will be striking a balance between slowly paying off the rest, adding new features, and fixing bugs.</p>

</div>      

  
    <hr class="fin"/>
  
</article>


  <footer>
  <div id="bio">
    <div id="bio-image">
      <img src="/static/mugshot.jpg" alt="Matt Swanson">
    </div>
    
    <div id="bio-text">
      <p>Hi. I'm <b>Matt Swanson</b>.</p>
      <p>I do things and sometimes write about it here. I'm a Software Engineer from Indiana and I ship code at <a href="http://www.sep.com/">SEP</a>.</p>
      
      <div id="bio-social">
        <strike>Stalk</strike> Follow me:
<div id="social-links">
  <a title="swanson on Github" href="http://github.com/swanson/"><i class="fa fa-github-square"></i></a>
  <a title="swanson on Hacker News" href="http://news.ycombinator.com/user?id=swanson"><i class="fa fa-hacker-news"></i></a>
  <a title="_swanson on Twitter" href="http://twitter.com/_swanson"><i class="fa fa-twitter-square"></i></a>
  <a title="RSS feed" id="rss" href="/atom.xml"><i class="fa fa-rss-square"></i></a>
</div>
      </div>
    </div>
  </div>

  
  <aside>
    <h3>Further reading</h3>
    <ul class="posts">
      
        
        
          
            <li><a href="/blog/2016/11/03/closing-down-a-product.html">Closing Down a Product, Gracefully</a></li>
          
        
          
            <li><a href="/blog/2016/09/26/adventures-in-content-marketing.html">Adventures in Content Marketing</a></li>
          
        
          
            <li><a href="/blog/2016/08/05/a-live-chat-experiment.html">A Live Chat Experiment</a></li>
          
        
      
    </ul>
  </aside>
  
</footer>

<div id="fine-print">
  <p>
    built with <a href="#">&hearts;</a>, <a href="http://jekyllrb.com/">Jekyll</a>, and <a href="https://github.com/swanson/swanson.github.com">GitHub Pages</a> &mdash; read the <a href="/legal">fine print</a>
  </p>
</div>

  </section>

  
</body>
</html>
